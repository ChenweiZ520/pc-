<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>

 <div id="wrap">
     <!--头部-->
     <header id="header">
         <div class="headerMain clearfix">
             <!--左侧logo区-->
            <h1 class="logo">
                <a href="javascript:;">
                    <img src="img/logo.png" alt="尚硅谷教育">
                </a>
            </h1>
             <!--音乐-->
             <div class="music">
                 <audio src="img/audio.mp3"></audio>
             </div>
             <!--右侧导航区-->
            <nav class="nav">
                <ul class="navList">
                    <li class="liItem">
                        <a href="javascript:;">
                            <div class="up"><img src="img/home_gruen.png"></div>
                            <div class="down"><img src="img/home.png"></div>
                        </a>
                    </li>
                    <li class="liItem">
                        <a href="javascript:;">
                            <div class="up">Course</div>
                            <div class="down">Course</div>
                        </a>
                    </li>
                    <li class="liItem">
                        <a href="javascript:;">
                            <div class="up">Works</div>
                            <div class="down">Works</div>
                        </a>
                    </li>
                    <li class="liItem">
                        <a href="javascript:;">
                            <div class="up">About</div>
                            <div class="down">About</div>
                        </a>
                    </li>
                    <li class="liItem">
                        <a href="javascript:;">
                            <div class="up">Team</div>
                            <div class="down">Team</div>
                        </a>
                    </li>
                </ul>
            </nav>
             <!--三角-->
            <div class="arrow"></div>
         </div>
     </header>
     <!--内容区-->
     <section id="conWrap">
         <ul class="conList">
             <!--第一屏-->
             <li class="conItem home">
                 <div class="conInner">
                     <ul class="homeList">
                         <li class="homeItem active"><div class="commonTitle">one layer</div></li>
                         <li class="homeItem "><div class="commonTitle">two layer</div></li>
                         <li class="homeItem "><div class="commonTitle">three layer</div></li>
                         <li class="homeItem "><div class="commonTitle">four layer</div></li>
                     </ul>
                     <!--小圆点-->
                     <ul class="homeNav clearfix">
                         <li class="homeIcon active"></li>
                         <li class="homeIcon"></li>
                         <li class="homeIcon"></li>
                         <li class="homeIcon"></li>
                     </ul>
                 </div>
             </li>
             <!--第二屏-->
             <li class="conItem course">
                 <div class="conInner">
                     <div class="course1">
                         <p class="commonTitle">EINIGE</p>
                         <p class="commonTitle">UNSERER</p>
                         <p class="commonTitle">KUNDEN</p>
                     </div>
                     <div class="course2">
                         <p class="commonText">
                             Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann.
                         </p>
                         <p class="commonText">
                             Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
                         </p>
                     </div>
                     <div class="course3 clearfix">
                         <div class="plus"></div>
                         <div class="plus"></div>
                         <div class="plus"></div>
                         <div class="plus"></div>
                         <div class="plus"></div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                         <div class="course3Item">
                             <div class="front"></div>
                             <div class="back">我是一段文字</div>
                         </div>
                     </div>
                 </div>
             </li>
             <!--第三屏-->
             <li class="conItem works">
                 <div class="conInner">
                     <div class="works1">
                         <p class="commonTitle">EINBLICK</p>
                         <p class="commonTitle">ERKENNTNIS</p>
                         <p class="commonTitle">ERGEBNIS</p>
                     </div>
                     <div class="works2 clearfix">
                         <div class="works2Item">
                            <img src="img/worksimg1.jpg">
                            <div class="mask">
                                <span>爱马仕·巴黎世家·卡地亚</span>
                                <div class="icon"></div>
                            </div>
                        </div>
                         <div class="works2Item">
                             <img src="img/worksimg2.jpg">
                             <div class="mask">
                                 <span>爱马仕·巴黎世家·卡地亚</span>
                                 <div class="icon"></div>
                             </div>
                         </div>
                         <div class="works2Item">
                             <img src="img/worksimg3.jpg">
                             <div class="mask">
                                 <span>爱马仕·巴黎世家·卡地亚</span>
                                 <div class="icon"></div>
                             </div>
                         </div>
                         <div class="works2Item">
                             <img src="img/worksimg4.jpg">
                             <div class="mask">
                                 <span>爱马仕·巴黎世家·卡地亚</span>
                                 <div class="icon"></div>
                             </div>
                         </div>
                     </div>
                     <div class="works3">
                         <div class="robot"></div>
                     </div>
                 </div>
             </li>
             <!--第四屏-->
             <li class="conItem about">
                 <div class="conInner">
                     <div class="about1">
                         <p class="commonTitle">EINBLICK</p>
                         <p class="commonTitle">ERKENNTNIS</p>
                         <p class="commonTitle">ERGEBNIS</p>
                     </div>
                     <div class="about2">
                         <p class="commonText">
                             Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.
                         </p>
                     </div>
                     <div class="about3">
                         <div class="about3Item">
                             <img src="img/about2.jpg">
                             <ul class="maskList">
                                 <li class="maskItem">
                                     <img src="img/about1.jpg">
                                 </li>
                                 <li class="maskItem">
                                     <img src="img/about1.jpg">
                                 </li>
                                 <li class="maskItem">
                                     <img src="img/about1.jpg">
                                 </li>
                                 <li class="maskItem">
                                     <img src="img/about1.jpg">
                                 </li>
                             </ul>
                         </div>
                         <div class="about3Item">
                             <img src="img/about4.jpg">
                             <ul class="maskList">
                                 <li class="maskItem">
                                     <img src="img/about3.jpg">
                                 </li>
                                 <li class="maskItem">
                                     <img src="img/about3.jpg">
                                 </li>
                                 <li class="maskItem">
                                     <img src="img/about3.jpg">
                                 </li>
                                 <li class="maskItem">
                                     <img src="img/about3.jpg">
                                 </li>
                             </ul>
                         </div>
                     </div>
                 </div>
                 <div class="line"></div>
             </li>
             <!--第五屏-->
             <li class="conItem team">
                 <div class="conInner clearfix">
                     <div class="team1">
                         <p class="commonTitle">WIR SIND</p>
                         <p class="commonTitle">VOXELAIR</p>
                     </div>
                     <div class="team2">
                         <p class="commonText">
                             Wir sind seit 2002 eine Full-Service-Werbeagentur mit Stammsitz in Heimsheim, zwischen Stuttgart und Karlsruhe.
                         </p>
                         <p class="commonText">
                             Über 60 Jahre Erfahrung vereinen das gesamte VoxelAir-Team. Dabei hat jedes Voxel neben professionellem Allroundwissen auch sein ganz spezielles Gebiet, um selbst die individuellsten Kundenwünsche schnell und kompetent umzusetzen.
                         </p>
                     </div>
                     <div class="team3">
                         <ul class="team3List clearfix">
                             <li class="team3Item"></li>
                             <li class="team3Item"></li>
                             <li class="team3Item"></li>
                             <li class="team3Item"></li>
                         </ul>
                     </div>
                 </div>
             </li>
         </ul>
         <ul class="menuList">
             <li class="menuItem active"></li>
             <li class="menuItem"></li>
             <li class="menuItem"></li>
             <li class="menuItem"></li>
             <li class="menuItem"></li>
         </ul>
     </section>
 </div>

</body>
<script type="text/javascript">
    window.onload = function () {
        var conWrap = document.getElementById('conWrap');
        var header = document.getElementById('header');
        var myMusic = document.querySelector('#header .headerMain .music');
        var myAudio = document.querySelector('#header .headerMain .music>audio');
        var conList = document.querySelector('#conWrap .conList');
        var conItems = document.querySelectorAll('#conWrap .conList .conItem');
        var arrow = document.querySelector('#header .headerMain .arrow');
        var ups = document.querySelectorAll('#header .headerMain .nav .liItem .up');
        var liItems = document.querySelectorAll('#header .headerMain .nav .navList .liItem');
        var homeIcons = document.querySelectorAll('#conWrap .conList .home .homeNav .homeIcon');
        var homeItems = document.querySelectorAll('#conWrap .conList .home .homeList .homeItem');
        var team3Items = document.querySelectorAll('#conWrap .conList .team .team3 .team3List .team3Item');
        var team3 = document.querySelector('#conWrap .conList .team .team3');
        var menuItems = document.querySelectorAll('#conWrap .menuList .menuItem');


        var index = 0;
        var oldIdex = 0; //第一屏小圆点切换索引
        var timer = null;
        var autoTimer = null;
        var isMoving = false;
        var myCanvas = null;
        var timer1 = null;
        var timer2 = null;

        //处理第一个up高亮
        ups[index].style.width = '100%';
        //初始化三角的位置
        arrow.style.left = liItems[index].getBoundingClientRect().left + liItems[index].offsetWidth/2+'px';

        //相应缩放逻辑
        window.onresize = function () {
            contBind();
            conMove(index);
        };

        //头部交互
        headerBind();
        function headerBind() {
            for (var i = 0; i < liItems.length; i++) {
                var item = liItems[i];
                item.index = i;
                //给每个导航加点击事件
                item.onclick = function () {
                    index = this.index;
                    conMove(this.index);
                }

            }
        }

        //屏幕切换逻辑
        function conMove(index) {
            //1、清除高亮样式
            for (var j = 0;j<ups.length;j++) {
                ups[j].style.width = '';
                menuItems[j].className = 'menuItem';
            }
            //2、点击那个up高亮
            ups[index].style.width = '100%';
            menuItems[index].className = 'menuItem active';
            //3、移动到当前位置
            arrow.style.left = liItems[index].getBoundingClientRect().left + liItems[index].offsetWidth/2+'px';
            //移动内容区
            conList.style.top = -index*(document.documentElement.clientHeight -header.offsetHeight)+'px';
        }

        //内容区域逻辑
        contBind();
        function contBind() {
            //设置承接内容盒子的高度
            conWrap.style.height = document.documentElement.clientHeight -header.offsetHeight + 'px';
            //给每一屏设置高度
            for (var i = 0; i < conItems.length; i++) {
                conItems[i].style.height = document.documentElement.clientHeight -header.offsetHeight + 'px';

            }
        }

        //鼠标滚轮逻辑
        mousewheel();
        function mousewheel() {
            //ie/chrome
            document.onmousewheel = function (event) {
                clearTimeout(timer);
                timer = setTimeout(function () {
                    scrollMove(event);
                },200);
            };
            //firefox
            if(document.addEventListener){
                document.addEventListener('DOMMouseScroll',function (event) {
                    clearTimeout(timer);
                    timer = setTimeout(function () {
                        scrollMove(event);
                    },200);
                });
            }
            function scrollMove(event) {
                event = event || window.event;
                var flag = '';
                if(event.wheelDelta){
                    //ie/chrome
                    if(event.wheelDelta > 0){
                        //上
                        flag = 'up';
                    }else {
                        //下
                        flag = 'down'
                    }
                }
                else if(event.detail){
                    //firefox
                    if(event.detail < 0){
                        //上
                        flag = 'up';
                    }else {
                        //下
                        flag = 'down'
                    }
                }
                //最终判断滚轮的方向
                switch (flag){
                    case 'up':
                        //滚轮向上滚动
                        if(index>0){
                            index--;
                            conMove(index);
                        }
                        break;
                    case 'down':
                        //滚轮向下滚动
                        if(index < liItems.length-1){
                            index++;
                            conMove(index);
                        }
                        break;
                }

                //取消默认行为
                event.preventDefault && event.preventDefault();
                return false;
            }
        }

        //第一屏点击切换
        homeClick();
        function homeClick() {
            for(var i=0;i<homeIcons.length;i++){
                var item = homeIcons[i];
                item.index = i;
                item.onclick = function () {
                    //判断是否正在进行动画切换
                    if(isMoving){
                        return;
                    }
                    isMoving = true;
                    setTimeout(function () {
                        isMoving = false;
                    },2000);
                    clearInterval(autoTimer);

                    //小圆点切换
                    for(var j=0;j<homeIcons.length;j++){
                        homeIcons[j].className = 'homeIcon';
                    }
                    this.className = 'homeIcon active';
                    //页面切换
                    if(oldIdex<this.index){
                        homeItems[oldIdex].className = 'homeItem leftHide';
                        homeItems[this.index].className = 'homeItem rightShow';
                    }else if(oldIdex>this.index){
                        homeItems[oldIdex].className = 'homeItem rightHide';
                        homeItems[this.index].className = 'homeItem leftShow';
                    }
                    oldIdex = this.index;
                    auto();
                }
            }
        }
        //自动轮播
        auto();
        function auto() {
            autoTimer = setInterval(function () {
                //判断是否正在进行动画切换
                if(isMoving){
                    return;
                }
                isMoving = true;
                setTimeout(function () {
                    isMoving = false;
                },2000);

                //小圆点切换
                for(var j=0;j<homeIcons.length;j++){
                    homeIcons[j].className = 'homeIcon';
                }
                homeIcons[oldIdex+1>3?0:oldIdex+1].className = 'homeIcon active';
                //页面切换
                homeItems[oldIdex].className = 'homeItem leftHide';
                homeItems[oldIdex+1>3?0:oldIdex+1].className = 'homeItem rightShow';
                if(oldIdex<homeItems.length-1){
                    oldIdex++;
                }else{
                    oldIdex=0;
                }
            },3000)
        }

        //第五屏气泡逻辑
        team();
        function team() {
            for (var i = 0;i<team3Items.length;i++){
                var item = team3Items[i];
                item.onmouseenter = function () {
                    for(var j=0;j<team3Items.length;j++){
                        team3Items[j].style.opacity = '0.5';
                    }
                    this.style.opacity = '1';
                    if(!myCanvas){
                        myCanvas = document.createElement('canvas');
                        myCanvas.width = this.offsetWidth;
                        myCanvas.height = this.offsetHeight;
//                    myCanvas.style.background  = 'gray';
                        team3.appendChild(myCanvas);
                        addAnimation();
                    }
                    myCanvas.style.left = this.offsetLeft + 'px';
                }
            }
            team3.onmouseleave = function () {
                for (var i = 0;i<team3Items.length;i++){
                    team3Items[i].style.opacity = '0.5';
                }
                myCanvas.remove();
                myCanvas = null;
                clearInterval(timer1);
                clearInterval(timer2);
            };
        }
        //给画布添加气泡动画
        function addAnimation() {
            var painting = myCanvas.getContext('2d');
            var arr = [];
            //放到画布上
            timer1 = setInterval(function () {
                painting.clearRect(0,0,myCanvas.width,myCanvas.height);
                //加工圆
                for(var j=0;j<arr.length;j++){
                    var item = arr[j];
                    item.deg++;
                    item.x =item.startX + Math.sin(item.deg*Math.PI/180)*80;
                    item.y = item.startY - (item.deg*Math.PI/180)*80;
                    if(item.y+item.r <0 ){
                        arr.splice(j,1);
                    }
                }

                //画圆
                for(var i=0;i<arr.length;i++){
                    var item = arr[i];
                    painting.beginPath();
                    painting.arc(item.x,item.y,item.r,0,2*Math.PI);
                    painting.fillStyle = 'rgba('+ item.red +','+ item.green +','+ item.blue +','+ item.a +')';
                    painting.fill();
                }

            },18);
            //创建圆
            timer2 = setInterval(function () {
                var obj = {};
                obj.r = Math.floor(Math.random()*8 + 4);
                obj.x = Math.floor(Math.random()*myCanvas.width);
                obj.y = myCanvas.height + obj.r;
                obj.red = Math.floor(Math.random()*255);
                obj.green = Math.floor(Math.random()*255);
                obj.blue = Math.floor(Math.random()*255);
                obj.a = 1;
                arr.push(obj);
                obj.startX = obj.x;
                obj.startY = obj.y;
                obj.deg = 0;

            },16)
        }

        //左侧小圆点点击事件
        menuClick();
        function menuClick() {
            for (var i = 0; i < menuItems.length; i++) {
                var item = menuItems[i];
                item.index = i;
                item.onclick = function () {
//                for (var j=0;j<menuItems.length;j++){
//                    menuItems[j].className = 'menuItem';
//                }
//                this.className = 'menuItem active';
                    //切换到点击的那一屏
                    conMove(this.index);
                    //维护鼠标滚轮计数器
                    index = this.index;
                }

            }
        }

        //音乐
        myMusic.onclick = function () {
            if(myAudio.paused){
                myAudio.play();
                myMusic.style.backgroundImage = 'url("img/musicon.gif")';
            }else{
                myAudio.pause();
                myMusic.style.backgroundImage = 'url("img/musicoff.gif")';
            }
        }



    }
</script>
</html>